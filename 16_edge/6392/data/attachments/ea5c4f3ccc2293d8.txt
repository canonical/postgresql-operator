[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m integration.high_availability.conftest:conftest.py:22 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql-test-app/0 clear-continuous-writes --wait 120s
[32mINFO    [0m integration.high_availability.conftest:conftest.py:25 Starting continuous writes
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql-test-app/0 start-continuous-writes
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m root:test_upgrade.py:132 Run pre-refresh-check action
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql/0 pre-refresh-check
[32mINFO    [0m root:test_upgrade.py:143 Inject dependency fault
[32mINFO    [0m root:test_upgrade.py:146 Refresh the charm
[32mINFO    [0m jubilant:_juju.py:391 cli: juju refresh --model testing postgresql --path /root/snap/juju/common/tmp92doi4g7/_temp.charm
[32mINFO    [0m root:test_upgrade.py:149 Wait for upgrade to fail on leader
[32mINFO    [0m root:test_upgrade.py:155 Ensure continuous writes on all units
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5qn66scad7d3suaj2bg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5qn66scad7d3suaj2bg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5qn66scad7d3suaj2bg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5qn66scad7d3suaj2bg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m root:test_upgrade.py:158 Re-refresh the charm
[32mINFO    [0m jubilant:_juju.py:391 cli: juju refresh --model testing postgresql --path /root/snap/juju/common/tmpcd19xz58/_temp.charm
[32mINFO    [0m root:test_upgrade.py:161 Wait for upgrade to complete
[32mINFO    [0m root:test_upgrade.py:166 Ensure continuous writes after rollback procedure
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5qn66scad7d3suaj2bg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5qn66scad7d3suaj2bg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5qn66scad7d3suaj2bg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5qn66scad7d3suaj2bg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m integration.high_availability.conftest:conftest.py:36 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql-test-app/0 clear-continuous-writes --wait 120s