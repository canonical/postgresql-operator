{"uid":"e5960c58ad438d13","name":"test_cluster_restore","fullName":"tests.integration.ha_tests.test_restore_cluster#test_cluster_restore","historyId":"bfd786bcea584ef3db80f0473c6efd1e","time":{"start":1771033237740,"stop":1771034369681,"duration":1131941},"description":"Recreates the cluster from storage volumes.","descriptionHtml":"<p>Recreates the cluster from storage volumes.</p>\n","status":"failed","statusMessage":"AssertionError: Unit missing from cluster\nassert 'second-cluster-3' in ['second-cluster-1', 'second-cluster-2']\n +  where 'second-cluster-3' = <built-in method replace of str object at 0x7f544492bf70>('/', '-')\n +    where <built-in method replace of str object at 0x7f544492bf70> = 'second-cluster/3'.replace\n +      where 'second-cluster/3' = <Unit entity_id=\"second-cluster/3\">.name","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 353, in from_call\n    result: TResult | None = func()\n                             ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 245, in <lambda>\n    lambda: runtest_hook(item=item, **kwds),\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/logging.py\", line 850, in pytest_runtest_call\n    yield\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/capture.py\", line 900, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/skipping.py\", line 268, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 179, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1720, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 166, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/ha_tests/test_restore_cluster.py\", line 137, in test_cluster_restore\n    assert unit.name.replace(\"/\", \"-\") in members, \"Unit missing from cluster\"\nAssertionError: Unit missing from cluster\nassert 'second-cluster-3' in ['second-cluster-1', 'second-cluster-2']\n +  where 'second-cluster-3' = <built-in method replace of str object at 0x7f544492bf70>('/', '-')\n +    where <built-in method replace of str object at 0x7f544492bf70> = 'second-cluster/3'.replace\n +      where 'second-cluster/3' = <Unit entity_id=\"second-cluster/3\">.name","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1771032719589,"stop":1771032719590,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1771032719590,"stop":1771032719590,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1771032719590,"stop":1771032719733,"duration":143},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1771033237740,"stop":1771033237740,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Recreates the cluster from storage volumes.","status":"failed","statusMessage":"AssertionError: Unit missing from cluster\nassert 'second-cluster-3' in ['second-cluster-1', 'second-cluster-2']\n +  where 'second-cluster-3' = <built-in method replace of str object at 0x7f544492bf70>('/', '-')\n +    where <built-in method replace of str object at 0x7f544492bf70> = 'second-cluster/3'.replace\n +      where 'second-cluster/3' = <Unit entity_id=\"second-cluster/3\">.name","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 353, in from_call\n    result: TResult | None = func()\n                             ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 245, in <lambda>\n    lambda: runtest_hook(item=item, **kwds),\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/logging.py\", line 850, in pytest_runtest_call\n    yield\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/capture.py\", line 900, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/skipping.py\", line 268, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 179, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1720, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 166, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/ha_tests/test_restore_cluster.py\", line 137, in test_cluster_restore\n    assert unit.name.replace(\"/\", \"-\") in members, \"Unit missing from cluster\"\nAssertionError: Unit missing from cluster\nassert 'second-cluster-3' in ['second-cluster-1', 'second-cluster-2']\n +  where 'second-cluster-3' = <built-in method replace of str object at 0x7f544492bf70>('/', '-')\n +    where <built-in method replace of str object at 0x7f544492bf70> = 'second-cluster/3'.replace\n +      where 'second-cluster/3' = <Unit entity_id=\"second-cluster/3\">.name","steps":[],"attachments":[{"uid":"e56112fe7b06d26d","name":"log","source":"e56112fe7b06d26d.txt","type":"text/plain","size":10598}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1771034369706,"stop":1771034369706,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1771034369706,"stop":1771034370025,"duration":319},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1771034370026,"stop":1771034370026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1771034370026,"stop":1771034370026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1771034370026,"stop":1771034370026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"asyncio"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_restore_cluster"},{"name":"host","value":"runnervmjduv7"},{"name":"thread","value":"11458-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_restore_cluster"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"4a3d5bfb933d5a95","status":"unknown","time":{}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"history":{"statistic":{"failed":2,"broken":1,"skipped":0,"passed":29,"unknown":0,"total":32},"items":[{"uid":"3f5cb39d1f3fbd7d","reportUrl":"../6528//#testresult/3f5cb39d1f3fbd7d","status":"passed","time":{"start":1770946907750,"stop":1770948009819,"duration":1102069}},{"uid":"fa5f912193496aab","reportUrl":"../6526//#testresult/fa5f912193496aab","status":"passed","time":{"start":1770860476579,"stop":1770861465330,"duration":988751}},{"uid":"69f71f8fe4415074","reportUrl":"../6506//#testresult/69f71f8fe4415074","status":"failed","statusDetails":"AssertionError: Unit missing from cluster\nassert 'second-cluster-3' in ['second-cluster-1', 'second-cluster-2']\n +  where 'second-cluster-3' = <built-in method replace of str object at 0x7ff1fb9a8ab0>('/', '-')\n +    where <built-in method replace of str object at 0x7ff1fb9a8ab0> = 'second-cluster/3'.replace\n +      where 'second-cluster/3' = <Unit entity_id=\"second-cluster/3\">.name","time":{"start":1770688162774,"stop":1770689238958,"duration":1076184}},{"uid":"b0ddb9c6fd488264","reportUrl":"../6501//#testresult/b0ddb9c6fd488264","status":"passed","time":{"start":1770601295919,"stop":1770602306912,"duration":1010993}},{"uid":"725fed813ba7ca9e","reportUrl":"../6499//#testresult/725fed813ba7ca9e","status":"passed","time":{"start":1770514938622,"stop":1770515992405,"duration":1053783}},{"uid":"fddc3f918af155bc","reportUrl":"../6497//#testresult/fddc3f918af155bc","status":"passed","time":{"start":1770428552494,"stop":1770429719937,"duration":1167443}},{"uid":"3243ea8cf12a9c12","reportUrl":"../6485//#testresult/3243ea8cf12a9c12","status":"passed","time":{"start":1770255685223,"stop":1770256864022,"duration":1178799}},{"uid":"2c61f5424f26e45f","reportUrl":"../6480//#testresult/2c61f5424f26e45f","status":"passed","time":{"start":1770169307680,"stop":1770170339485,"duration":1031805}},{"uid":"de1f6d9b29699379","reportUrl":"../6473//#testresult/de1f6d9b29699379","status":"passed","time":{"start":1770084105114,"stop":1770085133000,"duration":1027886}},{"uid":"d16c02c0adba93c7","reportUrl":"../6456//#testresult/d16c02c0adba93c7","status":"passed","time":{"start":1769996448972,"stop":1769997509173,"duration":1060201}},{"uid":"7300e23dcac85e2f","reportUrl":"../6454//#testresult/7300e23dcac85e2f","status":"passed","time":{"start":1769910055411,"stop":1769911086289,"duration":1030878}},{"uid":"7a3111b908ba451","reportUrl":"../6450//#testresult/7a3111b908ba451","status":"passed","time":{"start":1769823840012,"stop":1769824847698,"duration":1007686}},{"uid":"e08b5b05342ac6b4","reportUrl":"../6410//#testresult/e08b5b05342ac6b4","status":"passed","time":{"start":1769565167820,"stop":1769566172840,"duration":1005020}},{"uid":"f5df7b78bbc44400","reportUrl":"../6403//#testresult/f5df7b78bbc44400","status":"passed","time":{"start":1769478455592,"stop":1769479537272,"duration":1081680}},{"uid":"e222111bba3daa3","reportUrl":"../6394//#testresult/e222111bba3daa3","status":"passed","time":{"start":1769391612624,"stop":1769392759044,"duration":1146420}},{"uid":"8aa47bb8c487f1e7","reportUrl":"../6392//#testresult/8aa47bb8c487f1e7","status":"passed","time":{"start":1769305276354,"stop":1769306352018,"duration":1075664}},{"uid":"a0e8fe463f14d4c","reportUrl":"../6388//#testresult/a0e8fe463f14d4c","status":"passed","time":{"start":1769218779908,"stop":1769219760023,"duration":980115}},{"uid":"5ba6f12d160a25ce","reportUrl":"../6379//#testresult/5ba6f12d160a25ce","status":"passed","time":{"start":1769133439058,"stop":1769134415155,"duration":976097}},{"uid":"5bb8ee78f1cea376","reportUrl":"../6377//#testresult/5bb8ee78f1cea376","status":"passed","time":{"start":1769046051631,"stop":1769047086843,"duration":1035212}},{"uid":"21929d8d2b4c431b","reportUrl":"../6351//#testresult/21929d8d2b4c431b","status":"passed","time":{"start":1768873176000,"stop":1768874236480,"duration":1060480}}]},"tags":["asyncio"]},"source":"e5960c58ad438d13.json","parameterValues":[]}