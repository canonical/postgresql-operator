[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m integration.high_availability.conftest:conftest.py:22 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql-test-app/0 clear-continuous-writes --wait 120s
[32mINFO    [0m integration.high_availability.conftest:conftest.py:25 Starting continuous writes
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql-test-app/0 start-continuous-writes
[32mINFO    [0m root:test_upgrade.py:74 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5ontcnpfbcd3kj0oblg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5ontcnpfbcd3kj0oblg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5ontcnpfbcd3kj0oblg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5ontcnpfbcd3kj0oblg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m root:test_upgrade.py:79 Refresh the charm
[32mINFO    [0m jubilant:_juju.py:391 cli: juju refresh --model testing postgresql --path /root/snap/juju/common/tmp5f0fgouk/_temp.charm
[32mINFO    [0m root:test_upgrade.py:81 Wait for refresh to block as paused or incompatible
[32mINFO    [0m root:test_upgrade.py:102 Upgrade completed without snap refresh (charm.py upgrade only)
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m root:test_upgrade.py:105 Wait for upgrade to complete
[32mINFO    [0m root:test_upgrade.py:111 Wait for upgrade to complete
[32mINFO    [0m root:test_upgrade.py:117 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5ontcnpfbcd3kj0oblg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5ontcnpfbcd3kj0oblg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5ontcnpfbcd3kj0oblg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju show-secret --model testing secret:d5ontcnpfbcd3kj0oblg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m root:test_upgrade.py:120 checking the number of switchovers
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:391 cli: juju status --model testing --format json
[32mINFO    [0m integration.high_availability.conftest:conftest.py:36 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:391 cli: juju run --model testing --format json postgresql-test-app/0 clear-continuous-writes --wait 120s