[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m integration.high_availability.conftest:conftest.py:22 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-test-app/0 clear-continuous-writes --wait 120s
[32mINFO    [0m integration.high_availability.conftest:conftest.py:25 Starting continuous writes
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-test-app/0 start-continuous-writes
[32mINFO    [0m root:test_upgrade_from_stable.py:68 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d639dk1mgacd9kk401kg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d639dk1mgacd9kk401kg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d639dk1mgacd9kk401kg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d639dk1mgacd9kk401kg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m root:test_upgrade_from_stable.py:73 Refresh the charm
[32mINFO    [0m jubilant:_juju.py:394 cli: juju refresh --model testing postgresql --path /root/snap/juju/common/tmpjkxphcrl/_temp.charm
[32mINFO    [0m root:test_upgrade_from_stable.py:76 Wait for refresh to block as paused or incompatible
[32mINFO    [0m root:test_upgrade_from_stable.py:97 Upgrade completed without snap refresh (charm.py upgrade only)
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m root:test_upgrade_from_stable.py:100 Wait for upgrade to complete
[32mINFO    [0m root:test_upgrade_from_stable.py:106 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d639dk1mgacd9kk401kg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d639dk1mgacd9kk401kg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d639dk1mgacd9kk401kg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju secrets --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju show-secret --model testing secret:d639dk1mgacd9kk401kg --format json --reveal
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m root:test_upgrade_from_stable.py:109 checking the number of switchovers
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql/0 get-primary --wait 300s
[32mINFO    [0m jubilant:_juju.py:394 cli: juju status --model testing --format json
[32mINFO    [0m integration.high_availability.conftest:conftest.py:36 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:394 cli: juju run --model testing --format json postgresql-test-app/0 clear-continuous-writes --wait 120s