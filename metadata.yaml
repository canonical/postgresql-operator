# Copyright 2021 Canonical Ltd.
# See LICENSE file for licensing details.

name: postgresql
description: |
  Charm to operate the PostgreSQL database on machines
docs: https://discourse.charmhub.io/t/charmed-postgresql-documentation/9710
summary: |
  Charm to operate the PostgreSQL database on machines

peers:
  database-peers:
    interface: postgresql_peers
  restart:
    interface: rolling_op

provides:
  database:
    interface: postgresql_client
  db:
    interface: pgsql
  db-admin:
    interface: pgsql

requires:
  certificates:
    interface: tls-certificates
    limit: 1
  s3-parameters:
    interface: s3
    limit: 1

resources:
  patroni:
    type: file
    filename: patroni.tar.gz
    description: Patroni python package.

storage:
  pgdata:
    type: filesystem
    location: /var/lib/postgresql/data
