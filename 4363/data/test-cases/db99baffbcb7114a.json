{"uid":"db99baffbcb7114a","name":"test_database_relation_with_charm_libraries","fullName":"tests.integration.new_relations.test_new_relations_1#test_database_relation_with_charm_libraries","historyId":"6426d886f3171ca1d318c9ddac1d5a8e","time":{"start":1745720550087,"stop":1745720553623,"duration":3536},"description":"Test basic functionality of database relation interface.","descriptionHtml":"<p>Test basic functionality of database relation interface.</p>\n","status":"failed","statusMessage":"Failed: DID NOT RAISE <class 'psycopg2.errors.ReadOnlySqlTransaction'>","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: TResult | None = func()\n                             ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/threadexception.py\", line 92, in pytest_runtest_call\n    yield from thread_exception_runtest_hook()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/threadexception.py\", line 68, in thread_exception_runtest_hook\n    yield\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 95, in pytest_runtest_call\n    yield from unraisable_exception_runtest_hook()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 70, in unraisable_exception_runtest_hook\n    yield\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/logging.py\", line 846, in pytest_runtest_call\n    yield from self._runtest_for(item, \"call\")\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/logging.py\", line 829, in _runtest_for\n    yield\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/capture.py\", line 898, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/skipping.py\", line 257, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 174, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1627, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 159, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/new_relations/test_new_relations_1.py\", line 199, in test_database_relation_with_charm_libraries\n    with pytest.raises(psycopg2.errors.ReadOnlySqlTransaction):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python_api.py\", line 1019, in __exit__\n    fail(self.message)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/outcomes.py\", line 178, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\nFailed: DID NOT RAISE <class 'psycopg2.errors.ReadOnlySqlTransaction'>","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1745718038482,"stop":1745718038482,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1745718038482,"stop":1745718038482,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1745718038482,"stop":1745718038602,"duration":120},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1745720550086,"stop":1745720550086,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"abort_on_fail::0","time":{"start":1745720553626,"stop":1745720553626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1745720821473,"stop":1745720821766,"duration":293},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1745720821767,"stop":1745720821767,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1745720821767,"stop":1745720821767,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1745720821767,"stop":1745720821767,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.new_relations"},{"name":"suite","value":"test_new_relations_1"},{"name":"host","value":"fv-az1695-443"},{"name":"thread","value":"14124-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.new_relations.test_new_relations_1"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"a2d63c5e40348ee3","status":"unknown","time":{}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":68,"unknown":2,"total":71},"items":[{"uid":"1db6902b5c4208a6","reportUrl":"../4360//#testresult/1db6902b5c4208a6","status":"passed","time":{"start":1745632560586,"stop":1745632564035,"duration":3449}},{"uid":"259dd7554b00e8dc","reportUrl":"../4353//#testresult/259dd7554b00e8dc","status":"passed","time":{"start":1745546225466,"stop":1745546228997,"duration":3531}},{"uid":"3ada23833d8d58c8","reportUrl":"../4345//#testresult/3ada23833d8d58c8","status":"passed","time":{"start":1745459951771,"stop":1745459955345,"duration":3574}},{"uid":"910bf9b9bf07d346","reportUrl":"../4332//#testresult/910bf9b9bf07d346","status":"passed","time":{"start":1745373401383,"stop":1745373405041,"duration":3658}},{"uid":"a14c67e4375d8440","reportUrl":"../4310//#testresult/a14c67e4375d8440","status":"passed","time":{"start":1745286947784,"stop":1745286951559,"duration":3775}},{"uid":"d5d14637262d1e8f","reportUrl":"../4302//#testresult/d5d14637262d1e8f","status":"passed","time":{"start":1745200285844,"stop":1745200289448,"duration":3604}},{"uid":"e747dfceefb659e","reportUrl":"../4299//#testresult/e747dfceefb659e","status":"passed","time":{"start":1745113974296,"stop":1745113977846,"duration":3550}},{"uid":"90a51f3b3f9bc6e4","reportUrl":"../4298//#testresult/90a51f3b3f9bc6e4","status":"passed","time":{"start":1745027613934,"stop":1745027617626,"duration":3692}},{"uid":"ca86844662ae504","reportUrl":"../4297//#testresult/ca86844662ae504","status":"passed","time":{"start":1744941020726,"stop":1744941024643,"duration":3917}},{"uid":"5f27c39e0b7b085e","reportUrl":"../4293//#testresult/5f27c39e0b7b085e","status":"passed","time":{"start":1744854751939,"stop":1744854755643,"duration":3704}},{"uid":"f1ddbbcbcfd95f68","reportUrl":"../4272//#testresult/f1ddbbcbcfd95f68","status":"passed","time":{"start":1744768507153,"stop":1744768510874,"duration":3721}},{"uid":"d4fdbcccb56067cc","reportUrl":"../4250//#testresult/d4fdbcccb56067cc","status":"passed","time":{"start":1744681828906,"stop":1744681832679,"duration":3773}},{"uid":"efdac4816a131e4d","reportUrl":"../4247//#testresult/efdac4816a131e4d","status":"unknown","time":{}},{"uid":"aad1049077865a08","reportUrl":"../4246//#testresult/aad1049077865a08","status":"unknown","time":{}},{"uid":"2a4a92dc36255b2d","reportUrl":"../4244//#testresult/2a4a92dc36255b2d","status":"passed","time":{"start":1744336373916,"stop":1744336377483,"duration":3567}},{"uid":"25a45faa784bdaab","reportUrl":"../4239//#testresult/25a45faa784bdaab","status":"passed","time":{"start":1744250064794,"stop":1744250068385,"duration":3591}},{"uid":"6d5b86f509572f7f","reportUrl":"../4233//#testresult/6d5b86f509572f7f","status":"passed","time":{"start":1744163559528,"stop":1744163563148,"duration":3620}},{"uid":"84ccd3793ea63ac6","reportUrl":"../4224//#testresult/84ccd3793ea63ac6","status":"passed","time":{"start":1744077428791,"stop":1744077432332,"duration":3541}},{"uid":"2eb8199851216e6b","reportUrl":"../4219//#testresult/2eb8199851216e6b","status":"passed","time":{"start":1743990911832,"stop":1743990915396,"duration":3564}},{"uid":"b57ea47723326bac","reportUrl":"../4218//#testresult/b57ea47723326bac","status":"passed","time":{"start":1743904513667,"stop":1743904517279,"duration":3612}}]},"tags":["asyncio"]},"source":"db99baffbcb7114a.json","parameterValues":[]}