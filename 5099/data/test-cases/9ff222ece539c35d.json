{"uid":"9ff222ece539c35d","name":"test_interruption_db_process[SIGTERM-/snap/charmed-postgresql/[0-9]*/usr/bin/patroni]","fullName":"tests.integration.ha_tests.test_self_healing#test_interruption_db_process","historyId":"546685934c34cfff7f60423bbdce2bf1","time":{"start":1751507788536,"stop":1751507870832,"duration":82296},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1751506682411,"stop":1751506682412,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1751506682411,"stop":1751506682411,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1751506682412,"stop":1751506682570,"duration":158},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1751507700657,"stop":1751507705790,"duration":5133},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1751507788536,"stop":1751507788536,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1751507788536,"stop":1751507788536,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[],"attachments":[{"uid":"aa8765d66ec38ce8","name":"log","source":"aa8765d66ec38ce8.txt","type":"text/plain","size":775}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1751507870832,"stop":1751507871853,"duration":1021},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1751507871854,"stop":1751507871854,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1751510147422,"stop":1751510280650,"duration":133228},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f77229fc260 state=finished raised ConnectTimeout>]\n","statusTrace":"  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/allure_commons/_allure.py\", line 231, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 300, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 292, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/root/spread_project/tests/integration/ha_tests/conftest.py\", line 68, in primary_start_timeout\n    await change_patroni_setting(\n  File \"/root/spread_project/tests/integration/ha_tests/helpers.py\", line 165, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 445, in __iter__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 378, in iter\n    result = action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 421, in exc_check\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1751510280650,"stop":1751510280916,"duration":266},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1751510280917,"stop":1751510280917,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1751510280917,"stop":1751510280917,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1751510280917,"stop":1751510280917,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"pkrvmbietmlfzoi"},{"name":"thread","value":"15310-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"process","value":"'/snap/charmed-postgresql/[0-9]*/usr/bin/patroni'"},{"name":"signal","value":"'SIGTERM'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"5559f5669a5636df","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":1,"broken":1,"skipped":5,"passed":285,"unknown":19,"total":311},"items":[{"uid":"3d97ae10a172edff","reportUrl":"../5094//#testresult/3d97ae10a172edff","status":"passed","time":{"start":1751421132551,"stop":1751421211664,"duration":79113}},{"uid":"227633e00b6c97a5","reportUrl":"../5082//#testresult/227633e00b6c97a5","status":"passed","time":{"start":1751335556807,"stop":1751335639506,"duration":82699}},{"uid":"b3ebbf4a5cd04fc7","reportUrl":"../5074//#testresult/b3ebbf4a5cd04fc7","status":"passed","time":{"start":1751249177859,"stop":1751249267715,"duration":89856}},{"uid":"49a6130d8867cb18","reportUrl":"../5073//#testresult/49a6130d8867cb18","status":"passed","time":{"start":1751162617282,"stop":1751162706827,"duration":89545}},{"uid":"5d112e41cfbad43c","reportUrl":"../5072//#testresult/5d112e41cfbad43c","status":"skipped","statusDetails":"XFAIL aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1751076982532,"stop":1751076982532,"duration":0}},{"uid":"246dc1828a6f5786","reportUrl":"../5060//#testresult/246dc1828a6f5786","status":"passed","time":{"start":1750989914028,"stop":1750989995913,"duration":81885}},{"uid":"fec14eedf43acd29","reportUrl":"../5051//#testresult/fec14eedf43acd29","status":"passed","time":{"start":1750903513765,"stop":1750903593144,"duration":79379}},{"uid":"7bc8bbf412c04295","reportUrl":"../5044//#testresult/7bc8bbf412c04295","status":"passed","time":{"start":1750816736748,"stop":1750816819152,"duration":82404}},{"uid":"f9bf243721bdd79d","reportUrl":"../5031//#testresult/f9bf243721bdd79d","status":"passed","time":{"start":1750730574794,"stop":1750730656456,"duration":81662}},{"uid":"8bee34fad7a0227d","reportUrl":"../5028//#testresult/8bee34fad7a0227d","status":"passed","time":{"start":1750557800629,"stop":1750557879088,"duration":78459}},{"uid":"a577a8e05e10e2da","reportUrl":"../5027//#testresult/a577a8e05e10e2da","status":"passed","time":{"start":1750471502255,"stop":1750471581368,"duration":79113}},{"uid":"19d6d412a353992e","reportUrl":"../5017//#testresult/19d6d412a353992e","status":"passed","time":{"start":1750385312487,"stop":1750385396423,"duration":83936}},{"uid":"30922e1607ce893b","reportUrl":"../5011//#testresult/30922e1607ce893b","status":"passed","time":{"start":1750298847153,"stop":1750298982360,"duration":135207}},{"uid":"1a767e14b27c243b","reportUrl":"../5008//#testresult/1a767e14b27c243b","status":"passed","time":{"start":1750212261616,"stop":1750212343321,"duration":81705}},{"uid":"5f7a5f7c81b45fe8","reportUrl":"../4994//#testresult/5f7a5f7c81b45fe8","status":"passed","time":{"start":1750126078610,"stop":1750126163525,"duration":84915}},{"uid":"51c554e8fe8736f","reportUrl":"../4984//#testresult/51c554e8fe8736f","status":"failed","statusDetails":"AssertionError: testing.postgresql-0: writes not continuing to DB (current writes: 58 - previous writes: 58)","time":{"start":1750039561189,"stop":1750039809471,"duration":248282}},{"uid":"1ec596736277e9fd","reportUrl":"../4983//#testresult/1ec596736277e9fd","status":"passed","time":{"start":1749953378287,"stop":1749953459947,"duration":81660}},{"uid":"58a62cffc4761d16","reportUrl":"../4982//#testresult/58a62cffc4761d16","status":"passed","time":{"start":1749866357960,"stop":1749866439741,"duration":81781}},{"uid":"69432c691513ce7b","reportUrl":"../4973//#testresult/69432c691513ce7b","status":"passed","time":{"start":1749780727454,"stop":1749780809364,"duration":81910}},{"uid":"58f9326848364538","reportUrl":"../4966//#testresult/58f9326848364538","status":"passed","time":{"start":1749694077916,"stop":1749694159856,"duration":81940}}]},"tags":["asyncio","abort_on_fail"]},"source":"9ff222ece539c35d.json","parameterValues":["'/snap/charmed-postgresql/[0-9]*/usr/bin/patroni'","'SIGTERM'"]}