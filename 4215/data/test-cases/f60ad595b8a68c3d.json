{"uid":"f60ad595b8a68c3d","name":"test_interruption_db_process[SIGTERM-/snap/charmed-postgresql/[0-9]*/usr/bin/patroni]","fullName":"tests.integration.ha_tests.test_self_healing#test_interruption_db_process","historyId":"546685934c34cfff7f60423bbdce2bf1","time":{"start":1743645800132,"stop":1743645881005,"duration":80873},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1743644428398,"stop":1743644428398,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1743644428398,"stop":1743644428398,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1743644428398,"stop":1743644428516,"duration":118},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1743645712583,"stop":1743645716705,"duration":4122},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1743645800131,"stop":1743645800131,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1743645800132,"stop":1743645800132,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[],"attachments":[{"uid":"7a8570bf9e280392","name":"log","source":"7a8570bf9e280392.txt","type":"text/plain","size":783}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1743645881005,"stop":1743645882022,"duration":1017},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1743645882023,"stop":1743645882023,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1743647891692,"stop":1743648027502,"duration":135810},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f97837bd3a0 state=finished raised ConnectTimeout>]\n","statusTrace":"  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 300, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 292, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/root/spread_project/tests/integration/ha_tests/conftest.py\", line 68, in primary_start_timeout\n    await change_patroni_setting(\n  File \"/root/spread_project/tests/integration/ha_tests/helpers.py\", line 165, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 443, in __iter__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 376, in iter\n    result = action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 419, in exc_check\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1743648027502,"stop":1743648027771,"duration":269},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1743648027772,"stop":1743648027772,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1743648027772,"stop":1743648027772,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1743648027772,"stop":1743648027772,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az1444-766"},{"name":"thread","value":"14600-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"process","value":"'/snap/charmed-postgresql/[0-9]*/usr/bin/patroni'"},{"name":"signal","value":"'SIGTERM'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"290849e9b18d6ab4","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":1,"skipped":3,"passed":214,"unknown":7,"total":225},"items":[{"uid":"8e0c2dcd93ebfbd7","reportUrl":"../4214//#testresult/8e0c2dcd93ebfbd7","status":"passed","time":{"start":1743559531820,"stop":1743559608428,"duration":76608}},{"uid":"eaf06dcd7c482b29","reportUrl":"../4207//#testresult/eaf06dcd7c482b29","status":"passed","time":{"start":1743473178870,"stop":1743473255583,"duration":76713}},{"uid":"359c3d972202e4e9","reportUrl":"../4200//#testresult/359c3d972202e4e9","status":"passed","time":{"start":1743386197562,"stop":1743386278481,"duration":80919}},{"uid":"afbf630e08083e47","reportUrl":"../4199//#testresult/afbf630e08083e47","status":"passed","time":{"start":1743300636120,"stop":1743300712712,"duration":76592}},{"uid":"992a0eaacfad1fea","reportUrl":"../4197//#testresult/992a0eaacfad1fea","status":"passed","time":{"start":1743213550120,"stop":1743213630623,"duration":80503}},{"uid":"fdb40e5cc4fa7c8c","reportUrl":"../4193//#testresult/fdb40e5cc4fa7c8c","status":"passed","time":{"start":1743127370820,"stop":1743127450526,"duration":79706}},{"uid":"8832e760175f5199","reportUrl":"../4179//#testresult/8832e760175f5199","status":"passed","time":{"start":1743041031138,"stop":1743041112809,"duration":81671}},{"uid":"c33bc57e04f86fca","reportUrl":"../4164//#testresult/c33bc57e04f86fca","status":"passed","time":{"start":1742954729172,"stop":1742954811212,"duration":82040}},{"uid":"3165bb3bfd2c9147","reportUrl":"../4160//#testresult/3165bb3bfd2c9147","status":"passed","time":{"start":1742868946157,"stop":1742869026963,"duration":80806}},{"uid":"4c2bd0e9768ebcab","reportUrl":"../4150//#testresult/4c2bd0e9768ebcab","status":"passed","time":{"start":1742781518811,"stop":1742781600504,"duration":81693}},{"uid":"a9dc5ef2bf502edb","reportUrl":"../4149//#testresult/a9dc5ef2bf502edb","status":"passed","time":{"start":1742695342694,"stop":1742695423474,"duration":80780}},{"uid":"3b8999f767fa99b7","reportUrl":"../4148//#testresult/3b8999f767fa99b7","status":"passed","time":{"start":1742608639649,"stop":1742608716364,"duration":76715}},{"uid":"c9388f99e84d2b1f","reportUrl":"../4134//#testresult/c9388f99e84d2b1f","status":"passed","time":{"start":1742522315931,"stop":1742522396814,"duration":80883}},{"uid":"924bf0c1313e840a","reportUrl":"../4131//#testresult/924bf0c1313e840a","status":"passed","time":{"start":1742435858354,"stop":1742435940061,"duration":81707}},{"uid":"e954bfbb7d0d9292","reportUrl":"../4124//#testresult/e954bfbb7d0d9292","status":"passed","time":{"start":1742349670084,"stop":1742349751923,"duration":81839}},{"uid":"c4726a349d9de5cb","reportUrl":"../4119//#testresult/c4726a349d9de5cb","status":"passed","time":{"start":1742263418316,"stop":1742263495458,"duration":77142}},{"uid":"b0186ee8cff28ebe","reportUrl":"../4117//#testresult/b0186ee8cff28ebe","status":"passed","time":{"start":1742004003101,"stop":1742004084894,"duration":81793}},{"uid":"b393cff45540d739","reportUrl":"../4116//#testresult/b393cff45540d739","status":"passed","time":{"start":1741917532536,"stop":1741917614459,"duration":81923}},{"uid":"e6d62203e2eb97cd","reportUrl":"../4104//#testresult/e6d62203e2eb97cd","status":"passed","time":{"start":1741831165685,"stop":1741831247517,"duration":81832}},{"uid":"927c60c1031d32a2","reportUrl":"../4091//#testresult/927c60c1031d32a2","status":"passed","time":{"start":1741744822463,"stop":1741744902397,"duration":79934}}]},"tags":["asyncio","abort_on_fail"]},"source":"f60ad595b8a68c3d.json","parameterValues":["'/snap/charmed-postgresql/[0-9]*/usr/bin/patroni'","'SIGTERM'"]}